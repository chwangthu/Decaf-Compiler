 # PA 1-A Report

王琛 计65 2016011360

## 一、实验任务

本次实验是用Lex和Yacc分别进行词法分析和语法分析，最终生成语法分析树。

## 二、实验方法

实验需要先了解EBNF范式的语法，以及YACC和Lex的用法。

实验环境为`MacOS Mojave`, ` jdk_1.8.0_181`

添加一个特性一般的流程为：

- 在`Lexer.l`中添加上关键词或者运算符，交给Lex进行词法分析
- 在`Parser.y`中添加对应的token或者运算结合性，并将其添加到Semvalue中
- 根据文法的特性在`Parser.y`中写成正规表达式的形式，并添加相应的构造函数
- 在`Tree.java`中实现构造函数，并且实现`printTo`方法，根据要求对语法分析树进行打印

在此将特性4作为例子：

- 在`Lexer.l` 、`semvalue.java`、`Parser.y`添加上var关键字
- `Parser.y`添加`SimpleStmt`以及`Lvalue`的定义，使用相应的构造函数`Ident`和`Indexed`
- 在`Tree.java`中添加`Ident`和`Indexed`类，不过实验框架中已经实现好了，无需添加

## 三、一些注意点

- 串行条件卫士语句的改写。这里涉及到了`*`的正则表达式，需要构建一个list，并且分为两种情况，一是空，二是向list中加入相应的元素。这个思路我曾与李映辉同学讨论。在5(1)的特性也是同样的方法。
- default关键字的添加。虽然是关键字，但是我将其定义为运算符，经过测试，运算符的优先级也是有要求的。将其设置高为其他一元、二元优先运算符即可。或者将其设置为`%nonassoc`。另外，我发现将其设置为keyword也可以。
- 其他的运算符优先级
- 注意打印时增加和减少缩进

## Acknowledgements

在本次实验的开始，刘应天同学曾指导我完成了sealed语句。另外，在遇到问题时，我曾向周诚驰、刘应天请教。